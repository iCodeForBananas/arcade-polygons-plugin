!function t(e,o,r){function n(i,p){if(!o[i]){if(!e[i]){var a="function"==typeof require&&require;if(!p&&a)return a(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){var o=e[i][1][t];return n(o?o:t)},l,l.exports,t,e,o,r)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(t,e,o){function r(t,e,o){o=o||0;var r,n,s,i,p,a,l,h=[0,0];return r=t[1][1]-t[0][1],n=t[0][0]-t[1][0],s=r*t[0][0]+n*t[0][1],i=e[1][1]-e[0][1],p=e[0][0]-e[1][0],a=i*e[0][0]+p*e[0][1],l=r*p-i*n,I(l,0,o)||(h[0]=(p*s-n*a)/l,h[1]=(r*a-i*s)/l),h}function n(t,e,o,r){var n=e[0]-t[0],s=e[1]-t[1],i=r[0]-o[0],p=r[1]-o[1];if(i*s-p*n===0)return!1;var a=(n*(o[1]-t[1])+s*(t[0]-o[0]))/(i*s-p*n),l=(i*(t[1]-o[1])+p*(o[0]-t[0]))/(p*n-i*s);return a>=0&&a<=1&&l>=0&&l<=1}function s(t,e,o){return(e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1])}function i(t,e,o){return s(t,e,o)>0}function p(t,e,o){return s(t,e,o)>=0}function a(t,e,o){return s(t,e,o)<0}function l(t,e,o){return s(t,e,o)<=0}function h(t,e,o,r){if(r){var n=M,i=O;n[0]=e[0]-t[0],n[1]=e[1]-t[1],i[0]=o[0]-e[0],i[1]=o[1]-e[1];var p=n[0]*i[0]+n[1]*i[1],a=Math.sqrt(n[0]*n[0]+n[1]*n[1]),l=Math.sqrt(i[0]*i[0]+i[1]*i[1]),h=Math.acos(p/(a*l));return h<r}return 0===s(t,e,o)}function u(t,e){var o=e[0]-t[0],r=e[1]-t[1];return o*o+r*r}function c(t,e){var o=t.length;return t[e<0?e%o+o:e%o]}function y(t){t.length=0}function f(t,e,o,r){for(var n=o;n<r;n++)t.push(e[n])}function g(t){for(var e=0,o=t,r=1;r<t.length;++r)(o[r][1]<o[e][1]||o[r][1]===o[e][1]&&o[r][0]>o[e][0])&&(e=r);i(c(t,e-1),c(t,e),c(t,e+1))||v(t)}function v(t){for(var e=[],o=t.length,r=0;r!==o;r++)e.push(t.pop());for(var r=0;r!==o;r++)t[r]=e[r]}function d(t,e){return a(c(t,e-1),c(t,e),c(t,e+1))}function P(t,e,o){var n,s,i=C,a=E;if(p(c(t,e+1),c(t,e),c(t,o))&&l(c(t,e-1),c(t,e),c(t,o)))return!1;s=u(c(t,e),c(t,o));for(var h=0;h!==t.length;++h)if((h+1)%t.length!==e&&h!==e&&p(c(t,e),c(t,o),c(t,h+1))&&l(c(t,e),c(t,o),c(t,h))&&(i[0]=c(t,e),i[1]=c(t,o),a[0]=c(t,h),a[1]=c(t,h+1),n=r(i,a),u(c(t,e),n)<s))return!1;return!0}function b(t,e,o,r){var n=r||[];if(y(n),e<o)for(var s=e;s<=o;s++)n.push(t[s]);else{for(var s=0;s<=o;s++)n.push(t[s]);for(var s=e;s<t.length;s++)n.push(t[s])}return n}function x(t){for(var e=[],o=[],r=[],n=[],s=Number.MAX_VALUE,i=0;i<t.length;++i)if(d(t,i))for(var p=0;p<t.length;++p)if(P(t,i,p)){o=x(b(t,i,p,n)),r=x(b(t,p,i,n));for(var a=0;a<r.length;a++)o.push(r[a]);o.length<s&&(e=o,s=o.length,e.push([c(t,i),c(t,p)]))}return e}function A(t){var e=x(t);return e.length>0?w(t,e):[t]}function w(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var o=[t],r=0;r<e.length;r++)for(var n=e[r],s=0;s<o.length;s++){var i=o[s],p=w(i,n);if(p){o.splice(s,1),o.push(p[0],p[1]);break}}return o}var n=e,r=t.indexOf(n[0]),s=t.indexOf(n[1]);return r!==-1&&s!==-1&&[b(t,r,s),b(t,s,r)]}function m(t){var e,o=t;for(e=0;e<o.length-1;e++)for(var r=0;r<e-1;r++)if(n(o[e],o[e+1],o[r],o[r+1]))return!1;for(e=1;e<o.length-2;e++)if(n(o[0],o[o.length-1],o[e],o[e+1]))return!1;return!0}function V(t,e,o,r,n){n=n||0;var s=e[1]-t[1],i=t[0]-e[0],p=s*t[0]+i*t[1],a=r[1]-o[1],l=o[0]-r[0],h=a*o[0]+l*o[1],u=s*l-a*i;return I(u,0,n)?[0,0]:[(l*p-i*h)/u,(s*h-a*p)/u]}function N(t,e,o,r,n,s,h){s=s||100,h=h||0,n=n||25,e="undefined"!=typeof e?e:[],o=o||[],r=r||[];var y=[0,0],g=[0,0],v=[0,0],P=0,b=0,x=0,A=0,w=0,m=0,B=0,I=[],M=[],O=t,C=t;if(C.length<3)return e;if(h++,h>s)return console.warn("quickDecomp: max level ("+s+") reached."),e;for(var E=0;E<t.length;++E)if(d(O,E)){o.push(O[E]),P=b=Number.MAX_VALUE;for(var S=0;S<t.length;++S)i(c(O,E-1),c(O,E),c(O,S))&&l(c(O,E-1),c(O,E),c(O,S-1))&&(v=V(c(O,E-1),c(O,E),c(O,S),c(O,S-1)),a(c(O,E+1),c(O,E),v)&&(x=u(O[E],v),x<b&&(b=x,g=v,m=S))),i(c(O,E+1),c(O,E),c(O,S+1))&&l(c(O,E+1),c(O,E),c(O,S))&&(v=V(c(O,E+1),c(O,E),c(O,S),c(O,S+1)),i(c(O,E-1),c(O,E),v)&&(x=u(O[E],v),x<P&&(P=x,y=v,w=S)));if(m===(w+1)%t.length)v[0]=(g[0]+y[0])/2,v[1]=(g[1]+y[1])/2,r.push(v),E<w?(f(I,O,E,w+1),I.push(v),M.push(v),0!==m&&f(M,O,m,O.length),f(M,O,0,E+1)):(0!==E&&f(I,O,E,O.length),f(I,O,0,w+1),I.push(v),M.push(v),f(M,O,m,E+1));else{if(m>w&&(w+=t.length),A=Number.MAX_VALUE,w<m)return e;for(var S=m;S<=w;++S)p(c(O,E-1),c(O,E),c(O,S))&&l(c(O,E+1),c(O,E),c(O,S))&&(x=u(c(O,E),c(O,S)),x<A&&(A=x,B=S%t.length));E<B?(f(I,O,E,B+1),0!==B&&f(M,O,B,C.length),f(M,O,0,E+1)):(0!==E&&f(I,O,E,C.length),f(I,O,0,B+1),f(M,O,B,E+1))}return I.length<M.length?(N(I,e,o,r,n,s,h),N(M,e,o,r,n,s,h)):(N(M,e,o,r,n,s,h),N(I,e,o,r,n,s,h)),e}return e.push(t),e}function B(t,e){for(var o=0,r=t.length-1;t.length>3&&r>=0;--r)h(c(t,r-1),c(t,r),c(t,r+1),e)&&(t.splice(r%t.length,1),o++);return o}function I(t,e,o){return o=o||0,Math.abs(t-e)<o}e.exports={decomp:A,quickDecomp:N,isSimple:m,removeCollinearPoints:B,makeCCW:g};var M=[],O=[],C=[],E=[]},{}],2:[function(t,e,o){!function(t,r){"use strict";"function"==typeof define&&define.amd?define(r):"object"==typeof o?e.exports=r():t.SAT=r()}(this,function(){"use strict";function t(t,e){this.x=t||0,this.y=e||0}function e(e,o){this.pos=e||new t,this.r=o||0}function o(e,o){this.pos=e||new t,this.angle=0,this.offset=new t,this.setPoints(o||[])}function r(e,o,r){this.pos=e||new t,this.w=o||0,this.h=r||0}function n(){this.a=null,this.b=null,this.overlapN=new t,this.overlapV=new t,this.clear()}function s(t,e,o){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=t.length,i=0;i<s;i++){var p=t[i].dot(e);p<r&&(r=p),p>n&&(n=p)}o[0]=r,o[1]=n}function i(t,e,o,r,n,i){var p=d.pop(),a=d.pop(),l=g.pop().copy(e).sub(t),h=l.dot(n);if(s(o,n,p),s(r,n,a),a[0]+=h,a[1]+=h,p[0]>a[1]||a[0]>p[1])return g.push(l),d.push(p),d.push(a),!0;if(i){var u=0;if(p[0]<a[0])if(i.aInB=!1,p[1]<a[1])u=p[1]-a[0],i.bInA=!1;else{var c=p[1]-a[0],y=a[1]-p[0];u=c<y?c:-y}else if(i.bInA=!1,p[1]>a[1])u=p[0]-a[1],i.aInB=!1;else{var c=p[1]-a[0],y=a[1]-p[0];u=c<y?c:-y}var f=Math.abs(u);f<i.overlap&&(i.overlap=f,i.overlapN.copy(n),u<0&&i.overlapN.reverse())}return g.push(l),d.push(p),d.push(a),!1}function p(t,e){var o=t.len2(),r=e.dot(t);return r<0?x:r>o?w:A}function a(t,e){var o=g.pop().copy(t).sub(e.pos),r=e.r*e.r,n=o.len2();return g.push(o),n<=r}function l(t,e){b.pos.copy(t),P.clear();var o=y(b,e,P);return o&&(o=P.aInB),o}function h(t,e,o){var r=g.pop().copy(e.pos).sub(t.pos),n=t.r+e.r,s=n*n,i=r.len2();if(i>s)return g.push(r),!1;if(o){var p=Math.sqrt(i);o.a=t,o.b=e,o.overlap=n-p,o.overlapN.copy(r.normalize()),o.overlapV.copy(r).scale(o.overlap),o.aInB=t.r<=e.r&&p<=e.r-t.r,o.bInA=e.r<=t.r&&p<=t.r-e.r}return g.push(r),!0}function u(t,e,o){for(var r=g.pop().copy(e.pos).sub(t.pos),n=e.r,s=n*n,i=t.calcPoints,a=i.length,l=g.pop(),h=g.pop(),u=0;u<a;u++){var c=u===a-1?0:u+1,y=0===u?a-1:u-1,f=0,v=null;l.copy(t.edges[u]),h.copy(r).sub(i[u]),o&&h.len2()>s&&(o.aInB=!1);var d=p(l,h);if(d===x){l.copy(t.edges[y]);var P=g.pop().copy(r).sub(i[y]);if(d=p(l,P),d===w){var b=h.len();if(b>n)return g.push(r),g.push(l),g.push(h),g.push(P),!1;o&&(o.bInA=!1,v=h.normalize(),f=n-b)}g.push(P)}else if(d===w){if(l.copy(t.edges[c]),h.copy(r).sub(i[c]),d=p(l,h),d===x){var b=h.len();if(b>n)return g.push(r),g.push(l),g.push(h),!1;o&&(o.bInA=!1,v=h.normalize(),f=n-b)}}else{var A=l.perp().normalize(),b=h.dot(A),m=Math.abs(b);if(b>0&&m>n)return g.push(r),g.push(A),g.push(h),!1;o&&(v=A,f=n-b,(b>=0||f<2*n)&&(o.bInA=!1))}v&&o&&Math.abs(f)<Math.abs(o.overlap)&&(o.overlap=f,o.overlapN.copy(v))}return o&&(o.a=t,o.b=e,o.overlapV.copy(o.overlapN).scale(o.overlap)),g.push(r),g.push(l),g.push(h),!0}function c(t,e,o){var r=u(e,t,o);if(r&&o){var n=o.a,s=o.aInB;o.overlapN.reverse(),o.overlapV.reverse(),o.a=o.b,o.b=n,o.aInB=o.bInA,o.bInA=s}return r}function y(t,e,o){for(var r=t.calcPoints,n=r.length,s=e.calcPoints,p=s.length,a=0;a<n;a++)if(i(t.pos,e.pos,r,s,t.normals[a],o))return!1;for(var a=0;a<p;a++)if(i(t.pos,e.pos,r,s,e.normals[a],o))return!1;return o&&(o.a=t,o.b=e,o.overlapV.copy(o.overlapN).scale(o.overlap)),!0}var f={};f.Vector=t,f.V=t,t.prototype.copy=t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.perp=t.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},t.prototype.rotate=t.prototype.rotate=function(t){var e=this.x,o=this.y;return this.x=e*Math.cos(t)-o*Math.sin(t),this.y=e*Math.sin(t)+o*Math.cos(t),this},t.prototype.reverse=t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=t.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.add=t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scale=t.prototype.scale=function(t,e){return this.x*=t,this.y*=e||t,this},t.prototype.project=t.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},t.prototype.projectN=t.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},t.prototype.reflect=t.prototype.reflect=function(t){var e=this.x,o=this.y;return this.project(t).scale(2),this.x-=e,this.y-=o,this},t.prototype.reflectN=t.prototype.reflectN=function(t){var e=this.x,o=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=o,this},t.prototype.dot=t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len2=t.prototype.len2=function(){return this.dot(this)},t.prototype.len=t.prototype.len=function(){return Math.sqrt(this.len2())},f.Circle=e,e.prototype.getAABB=e.prototype.getAABB=function(){var e=this.r,o=this.pos.clone().sub(new t(e,e));return new r(o,2*e,2*e).toPolygon()},f.Polygon=o,o.prototype.setPoints=o.prototype.setPoints=function(e){var o=!this.points||this.points.length!==e.length;if(o){var r,n=this.calcPoints=[],s=this.edges=[],i=this.normals=[];for(r=0;r<e.length;r++)n.push(new t),s.push(new t),i.push(new t)}return this.points=e,this._recalc(),this},o.prototype.setAngle=o.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},o.prototype.setOffset=o.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},o.prototype.rotate=o.prototype.rotate=function(t){for(var e=this.points,o=e.length,r=0;r<o;r++)e[r].rotate(t);return this._recalc(),this},o.prototype.translate=o.prototype.translate=function(t,e){for(var o=this.points,r=o.length,n=0;n<r;n++)o[n].x+=t,o[n].y+=e;return this._recalc(),this},o.prototype._recalc=function(){var t,e=this.calcPoints,o=this.edges,r=this.normals,n=this.points,s=this.offset,i=this.angle,p=n.length;for(t=0;t<p;t++){var a=e[t].copy(n[t]);a.x+=s.x,a.y+=s.y,0!==i&&a.rotate(i)}for(t=0;t<p;t++){var l=e[t],h=t<p-1?e[t+1]:e[0],u=o[t].copy(h).sub(l);r[t].copy(u).perp().normalize()}return this},o.prototype.getAABB=o.prototype.getAABB=function(){for(var e=this.calcPoints,o=e.length,n=e[0].x,s=e[0].y,i=e[0].x,p=e[0].y,a=1;a<o;a++){var l=e[a];l.x<n?n=l.x:l.x>i&&(i=l.x),l.y<s?s=l.y:l.y>p&&(p=l.y)}return new r(this.pos.clone().add(new t(n,s)),i-n,p-s).toPolygon()},f.Box=r,r.prototype.toPolygon=r.prototype.toPolygon=function(){var e=this.pos,r=this.w,n=this.h;return new o(new t(e.x,e.y),[new t,new t(r,0),new t(r,n),new t(0,n)])},f.Response=n,n.prototype.clear=n.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var g=[],v=0;v<10;v++)g.push(new t);for(var d=[],v=0;v<5;v++)d.push([]);var P=new n,b=new r(new t,1e-6,1e-6).toPolygon();f.isSeparatingAxis=i;var x=-1,A=0,w=1;return f.pointInCircle=a,f.pointInPolygon=l,f.testCircleCircle=h,f.testPolygonCircle=u,f.testCirclePolygon=c,f.testPolygonPolygon=y,f})},{}],3:[function(t,e,o){function r(t){return[].concat.apply([],t)}const n=t("poly-decomp"),s=t("sat"),i=function(){};i.prototype.enable=function(t,e){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.enable(t[o]);else t instanceof Phaser.Group?this.enable(t.children):(t.hasOwnProperty("body")&&this.enableBody(t.body,e),t.hasOwnProperty("children")&&t.children.length>0&&this.enable(t.children))},i.prototype.enableBody=function(t,e){for(var o=[],r=0;r<e.length;r+=2)o.push(new s.Vector(e[r],e[r+1]));var n=new s.Polygon(new s.Vector(0,0),o);t.sat={polygon:n}},i.prototype.enableSpriteBody=function(t,e){t.hasOwnProperty("body")||console.error("Enable arcade physics before enabling polygon physics."),e.game.physics.arcade.enable(t);var o=t.body,r=new s.Box(new s.Vector(o.x,o.y),o.width,o.height).toPolygon();o.sat={polygon:r}},i.prototype.enableGroup=function(t,e,o){var s=[];e.forEach(function(t){var e=n.quickDecomp(t);e.forEach(function(t){s.push(r(t))})}),s.forEach(function(e){var r=o.game.add.sprite(0,0);o.game.physics.arcade.enable(r),o.game.arcadePolygons.enable(r,e),r.body.immovable=!0,r.body.allowGravity=!1,t.add(r)})},e.exports=i},{"poly-decomp":1,sat:2}],4:[function(t,e,o){const r=t("sat"),n={};n.collideSpriteVsGroup=function(t,e,o,n,s,i){if(0!==e.length&&t.body&&t.body.sat){var p=t.body;p.sat.polygon.pos.x=p.x,p.sat.polygon.pos.y=p.y;for(var a in e.children){var l=e.children[a];if(l.alive){l.body.sat.polygon.pos.x=l.body.x,l.body.sat.polygon.pos.y=l.body.y;var h=new r.Response,u=r.testPolygonPolygon(p.sat.polygon,l.body.sat.polygon,h);if(u){if(o)return o.call(s,t,l);var c=h.overlapV.clone().scale(-1);p.position.x+=c.x,p.position.y+=c.y,c.x>0&&(p.touching.left=!0),c.x<0&&(p.touching.right=!0),c.y>0&&(p.touching.up=!0),c.y<0&&(p.touching.down=!0),p.sat.polygon.pos.x=p.position.x,p.sat.polygon.pos.y=p.position.y;var y=new r.Vector(p.velocity.x,p.velocity.y),f=h.overlapN.clone().scale(-1),g=y.clone().projectN(f),v=y.clone().sub(g),d=g.clone().scale(-p.sat.bounce),P=v.clone().scale(1-p.sat.friction),b=P.clone().add(d);p.velocity.x=b.x,p.velocity.y=b.y}}}}},e.exports=n},{sat:2}],5:[function(t,e,o){const r=t("./Facade"),n=t("./Overrides");Phaser.Plugin.ArcadePolygons=function(t,e){Phaser.Plugin.call(this,t,e),this.facade=new Phaser.Plugin.ArcadePolygons.Facade},Phaser.Plugin.ArcadePolygons.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.ArcadePolygons.prototype.constructor=Phaser.Plugin.ArcadePolygons,Phaser.Plugin.ArcadePolygons.VERSION="1",Phaser.Plugin.ArcadePolygons.prototype.init=function(){this.game.arcadePolygons=this.game.arcadePolygons||this.facade,this.originalCollideSpriteVsGroup=Phaser.Physics.Arcade.prototype.collideSpriteVsGroup,Phaser.Physics.Arcade.prototype.collideSpriteVsGroup=Phaser.Plugin.ArcadePolygons.Overrides.collideSpriteVsGroup},Phaser.Plugin.ArcadePolygons.prototype.destroy=function(){this.game.arcadePolygons=null,Phaser.Physics.Arcade.prototype.collideSpriteVsGroup=this.originalCollideSpriteVsGroup,Phaser.Plugin.prototype.destroy.call(this)},Phaser.Plugin.ArcadePolygons.Overrides=n,Phaser.Plugin.ArcadePolygons.Facade=r,window.Phaser.Plugin.ArcadePolygons=Phaser.Plugin.ArcadePolygons,e.exports=Phaser.Plugin.ArcadePolygons},{"./Facade":3,"./Overrides":4}]},{},[5]);