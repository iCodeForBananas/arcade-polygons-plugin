!function t(e,o,r){function n(i,a){if(!o[i]){if(!e[i]){var p="function"==typeof require&&require;if(!a&&p)return p(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){var o=e[i][1][t];return n(o?o:t)},l,l.exports,t,e,o,r)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(t,e,o){function r(t,e,o){o=o||0;var r,n,s,i,a,p,l,c=[0,0];return r=t[1][1]-t[0][1],n=t[0][0]-t[1][0],s=r*t[0][0]+n*t[0][1],i=e[1][1]-e[0][1],a=e[0][0]-e[1][0],p=i*e[0][0]+a*e[0][1],l=r*a-i*n,I(l,0,o)||(c[0]=(a*s-n*p)/l,c[1]=(r*p-i*s)/l),c}function n(t,e,o,r){var n=e[0]-t[0],s=e[1]-t[1],i=r[0]-o[0],a=r[1]-o[1];if(i*s-a*n===0)return!1;var p=(n*(o[1]-t[1])+s*(t[0]-o[0]))/(i*s-a*n),l=(i*(t[1]-o[1])+a*(o[0]-t[0]))/(a*n-i*s);return p>=0&&p<=1&&l>=0&&l<=1}function s(t,e,o){return(e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1])}function i(t,e,o){return s(t,e,o)>0}function a(t,e,o){return s(t,e,o)>=0}function p(t,e,o){return s(t,e,o)<0}function l(t,e,o){return s(t,e,o)<=0}function c(t,e,o,r){if(r){var n=M,i=O;n[0]=e[0]-t[0],n[1]=e[1]-t[1],i[0]=o[0]-e[0],i[1]=o[1]-e[1];var a=n[0]*i[0]+n[1]*i[1],p=Math.sqrt(n[0]*n[0]+n[1]*n[1]),l=Math.sqrt(i[0]*i[0]+i[1]*i[1]),c=Math.acos(a/(p*l));return c<r}return 0===s(t,e,o)}function u(t,e){var o=e[0]-t[0],r=e[1]-t[1];return o*o+r*r}function h(t,e){var o=t.length;return t[e<0?e%o+o:e%o]}function y(t){t.length=0}function f(t,e,o,r){for(var n=o;n<r;n++)t.push(e[n])}function v(t){for(var e=0,o=t,r=1;r<t.length;++r)(o[r][1]<o[e][1]||o[r][1]===o[e][1]&&o[r][0]>o[e][0])&&(e=r);i(h(t,e-1),h(t,e),h(t,e+1))||g(t)}function g(t){for(var e=[],o=t.length,r=0;r!==o;r++)e.push(t.pop());for(var r=0;r!==o;r++)t[r]=e[r]}function d(t,e){return p(h(t,e-1),h(t,e),h(t,e+1))}function P(t,e,o){var n,s,i=C,p=E;if(a(h(t,e+1),h(t,e),h(t,o))&&l(h(t,e-1),h(t,e),h(t,o)))return!1;s=u(h(t,e),h(t,o));for(var c=0;c!==t.length;++c)if((c+1)%t.length!==e&&c!==e&&a(h(t,e),h(t,o),h(t,c+1))&&l(h(t,e),h(t,o),h(t,c))&&(i[0]=h(t,e),i[1]=h(t,o),p[0]=h(t,c),p[1]=h(t,c+1),n=r(i,p),u(h(t,e),n)<s))return!1;return!0}function b(t,e,o,r){var n=r||[];if(y(n),e<o)for(var s=e;s<=o;s++)n.push(t[s]);else{for(var s=0;s<=o;s++)n.push(t[s]);for(var s=e;s<t.length;s++)n.push(t[s])}return n}function x(t){for(var e=[],o=[],r=[],n=[],s=Number.MAX_VALUE,i=0;i<t.length;++i)if(d(t,i))for(var a=0;a<t.length;++a)if(P(t,i,a)){o=x(b(t,i,a,n)),r=x(b(t,a,i,n));for(var p=0;p<r.length;p++)o.push(r[p]);o.length<s&&(e=o,s=o.length,e.push([h(t,i),h(t,a)]))}return e}function A(t){var e=x(t);return e.length>0?m(t,e):[t]}function m(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var o=[t],r=0;r<e.length;r++)for(var n=e[r],s=0;s<o.length;s++){var i=o[s],a=m(i,n);if(a){o.splice(s,1),o.push(a[0],a[1]);break}}return o}var n=e,r=t.indexOf(n[0]),s=t.indexOf(n[1]);return r!==-1&&s!==-1&&[b(t,r,s),b(t,s,r)]}function w(t){var e,o=t;for(e=0;e<o.length-1;e++)for(var r=0;r<e-1;r++)if(n(o[e],o[e+1],o[r],o[r+1]))return!1;for(e=1;e<o.length-2;e++)if(n(o[0],o[o.length-1],o[e],o[e+1]))return!1;return!0}function V(t,e,o,r,n){n=n||0;var s=e[1]-t[1],i=t[0]-e[0],a=s*t[0]+i*t[1],p=r[1]-o[1],l=o[0]-r[0],c=p*o[0]+l*o[1],u=s*l-p*i;return I(u,0,n)?[0,0]:[(l*a-i*c)/u,(s*c-p*a)/u]}function N(t,e,o,r,n,s,c){s=s||100,c=c||0,n=n||25,e="undefined"!=typeof e?e:[],o=o||[],r=r||[];var y=[0,0],v=[0,0],g=[0,0],P=0,b=0,x=0,A=0,m=0,w=0,B=0,I=[],M=[],O=t,C=t;if(C.length<3)return e;if(c++,c>s)return console.warn("quickDecomp: max level ("+s+") reached."),e;for(var E=0;E<t.length;++E)if(d(O,E)){o.push(O[E]),P=b=Number.MAX_VALUE;for(var S=0;S<t.length;++S)i(h(O,E-1),h(O,E),h(O,S))&&l(h(O,E-1),h(O,E),h(O,S-1))&&(g=V(h(O,E-1),h(O,E),h(O,S),h(O,S-1)),p(h(O,E+1),h(O,E),g)&&(x=u(O[E],g),x<b&&(b=x,v=g,w=S))),i(h(O,E+1),h(O,E),h(O,S+1))&&l(h(O,E+1),h(O,E),h(O,S))&&(g=V(h(O,E+1),h(O,E),h(O,S),h(O,S+1)),i(h(O,E-1),h(O,E),g)&&(x=u(O[E],g),x<P&&(P=x,y=g,m=S)));if(w===(m+1)%t.length)g[0]=(v[0]+y[0])/2,g[1]=(v[1]+y[1])/2,r.push(g),E<m?(f(I,O,E,m+1),I.push(g),M.push(g),0!==w&&f(M,O,w,O.length),f(M,O,0,E+1)):(0!==E&&f(I,O,E,O.length),f(I,O,0,m+1),I.push(g),M.push(g),f(M,O,w,E+1));else{if(w>m&&(m+=t.length),A=Number.MAX_VALUE,m<w)return e;for(var S=w;S<=m;++S)a(h(O,E-1),h(O,E),h(O,S))&&l(h(O,E+1),h(O,E),h(O,S))&&(x=u(h(O,E),h(O,S)),x<A&&(A=x,B=S%t.length));E<B?(f(I,O,E,B+1),0!==B&&f(M,O,B,C.length),f(M,O,0,E+1)):(0!==E&&f(I,O,E,C.length),f(I,O,0,B+1),f(M,O,B,E+1))}return I.length<M.length?(N(I,e,o,r,n,s,c),N(M,e,o,r,n,s,c)):(N(M,e,o,r,n,s,c),N(I,e,o,r,n,s,c)),e}return e.push(t),e}function B(t,e){for(var o=0,r=t.length-1;t.length>3&&r>=0;--r)c(h(t,r-1),h(t,r),h(t,r+1),e)&&(t.splice(r%t.length,1),o++);return o}function I(t,e,o){return o=o||0,Math.abs(t-e)<o}e.exports={decomp:A,quickDecomp:N,isSimple:w,removeCollinearPoints:B,makeCCW:v};var M=[],O=[],C=[],E=[]},{}],2:[function(t,e,o){!function(t,r){"use strict";"function"==typeof define&&define.amd?define(r):"object"==typeof o?e.exports=r():t.SAT=r()}(this,function(){"use strict";function t(t,e){this.x=t||0,this.y=e||0}function e(e,o){this.pos=e||new t,this.r=o||0}function o(e,o){this.pos=e||new t,this.angle=0,this.offset=new t,this.setPoints(o||[])}function r(e,o,r){this.pos=e||new t,this.w=o||0,this.h=r||0}function n(){this.a=null,this.b=null,this.overlapN=new t,this.overlapV=new t,this.clear()}function s(t,e,o){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=t.length,i=0;i<s;i++){var a=t[i].dot(e);a<r&&(r=a),a>n&&(n=a)}o[0]=r,o[1]=n}function i(t,e,o,r,n,i){var a=d.pop(),p=d.pop(),l=v.pop().copy(e).sub(t),c=l.dot(n);if(s(o,n,a),s(r,n,p),p[0]+=c,p[1]+=c,a[0]>p[1]||p[0]>a[1])return v.push(l),d.push(a),d.push(p),!0;if(i){var u=0;if(a[0]<p[0])if(i.aInB=!1,a[1]<p[1])u=a[1]-p[0],i.bInA=!1;else{var h=a[1]-p[0],y=p[1]-a[0];u=h<y?h:-y}else if(i.bInA=!1,a[1]>p[1])u=a[0]-p[1],i.aInB=!1;else{var h=a[1]-p[0],y=p[1]-a[0];u=h<y?h:-y}var f=Math.abs(u);f<i.overlap&&(i.overlap=f,i.overlapN.copy(n),u<0&&i.overlapN.reverse())}return v.push(l),d.push(a),d.push(p),!1}function a(t,e){var o=t.len2(),r=e.dot(t);return r<0?x:r>o?m:A}function p(t,e){var o=v.pop().copy(t).sub(e.pos),r=e.r*e.r,n=o.len2();return v.push(o),n<=r}function l(t,e){b.pos.copy(t),P.clear();var o=y(b,e,P);return o&&(o=P.aInB),o}function c(t,e,o){var r=v.pop().copy(e.pos).sub(t.pos),n=t.r+e.r,s=n*n,i=r.len2();if(i>s)return v.push(r),!1;if(o){var a=Math.sqrt(i);o.a=t,o.b=e,o.overlap=n-a,o.overlapN.copy(r.normalize()),o.overlapV.copy(r).scale(o.overlap),o.aInB=t.r<=e.r&&a<=e.r-t.r,o.bInA=e.r<=t.r&&a<=t.r-e.r}return v.push(r),!0}function u(t,e,o){for(var r=v.pop().copy(e.pos).sub(t.pos),n=e.r,s=n*n,i=t.calcPoints,p=i.length,l=v.pop(),c=v.pop(),u=0;u<p;u++){var h=u===p-1?0:u+1,y=0===u?p-1:u-1,f=0,g=null;l.copy(t.edges[u]),c.copy(r).sub(i[u]),o&&c.len2()>s&&(o.aInB=!1);var d=a(l,c);if(d===x){l.copy(t.edges[y]);var P=v.pop().copy(r).sub(i[y]);if(d=a(l,P),d===m){var b=c.len();if(b>n)return v.push(r),v.push(l),v.push(c),v.push(P),!1;o&&(o.bInA=!1,g=c.normalize(),f=n-b)}v.push(P)}else if(d===m){if(l.copy(t.edges[h]),c.copy(r).sub(i[h]),d=a(l,c),d===x){var b=c.len();if(b>n)return v.push(r),v.push(l),v.push(c),!1;o&&(o.bInA=!1,g=c.normalize(),f=n-b)}}else{var A=l.perp().normalize(),b=c.dot(A),w=Math.abs(b);if(b>0&&w>n)return v.push(r),v.push(A),v.push(c),!1;o&&(g=A,f=n-b,(b>=0||f<2*n)&&(o.bInA=!1))}g&&o&&Math.abs(f)<Math.abs(o.overlap)&&(o.overlap=f,o.overlapN.copy(g))}return o&&(o.a=t,o.b=e,o.overlapV.copy(o.overlapN).scale(o.overlap)),v.push(r),v.push(l),v.push(c),!0}function h(t,e,o){var r=u(e,t,o);if(r&&o){var n=o.a,s=o.aInB;o.overlapN.reverse(),o.overlapV.reverse(),o.a=o.b,o.b=n,o.aInB=o.bInA,o.bInA=s}return r}function y(t,e,o){for(var r=t.calcPoints,n=r.length,s=e.calcPoints,a=s.length,p=0;p<n;p++)if(i(t.pos,e.pos,r,s,t.normals[p],o))return!1;for(var p=0;p<a;p++)if(i(t.pos,e.pos,r,s,e.normals[p],o))return!1;return o&&(o.a=t,o.b=e,o.overlapV.copy(o.overlapN).scale(o.overlap)),!0}var f={};f.Vector=t,f.V=t,t.prototype.copy=t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.perp=t.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},t.prototype.rotate=t.prototype.rotate=function(t){var e=this.x,o=this.y;return this.x=e*Math.cos(t)-o*Math.sin(t),this.y=e*Math.sin(t)+o*Math.cos(t),this},t.prototype.reverse=t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=t.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.add=t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scale=t.prototype.scale=function(t,e){return this.x*=t,this.y*=e||t,this},t.prototype.project=t.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},t.prototype.projectN=t.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},t.prototype.reflect=t.prototype.reflect=function(t){var e=this.x,o=this.y;return this.project(t).scale(2),this.x-=e,this.y-=o,this},t.prototype.reflectN=t.prototype.reflectN=function(t){var e=this.x,o=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=o,this},t.prototype.dot=t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len2=t.prototype.len2=function(){return this.dot(this)},t.prototype.len=t.prototype.len=function(){return Math.sqrt(this.len2())},f.Circle=e,e.prototype.getAABB=e.prototype.getAABB=function(){var e=this.r,o=this.pos.clone().sub(new t(e,e));return new r(o,2*e,2*e).toPolygon()},f.Polygon=o,o.prototype.setPoints=o.prototype.setPoints=function(e){var o=!this.points||this.points.length!==e.length;if(o){var r,n=this.calcPoints=[],s=this.edges=[],i=this.normals=[];for(r=0;r<e.length;r++)n.push(new t),s.push(new t),i.push(new t)}return this.points=e,this._recalc(),this},o.prototype.setAngle=o.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},o.prototype.setOffset=o.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},o.prototype.rotate=o.prototype.rotate=function(t){for(var e=this.points,o=e.length,r=0;r<o;r++)e[r].rotate(t);return this._recalc(),this},o.prototype.translate=o.prototype.translate=function(t,e){for(var o=this.points,r=o.length,n=0;n<r;n++)o[n].x+=t,o[n].y+=e;return this._recalc(),this},o.prototype._recalc=function(){var t,e=this.calcPoints,o=this.edges,r=this.normals,n=this.points,s=this.offset,i=this.angle,a=n.length;for(t=0;t<a;t++){var p=e[t].copy(n[t]);p.x+=s.x,p.y+=s.y,0!==i&&p.rotate(i)}for(t=0;t<a;t++){var l=e[t],c=t<a-1?e[t+1]:e[0],u=o[t].copy(c).sub(l);r[t].copy(u).perp().normalize()}return this},o.prototype.getAABB=o.prototype.getAABB=function(){for(var e=this.calcPoints,o=e.length,n=e[0].x,s=e[0].y,i=e[0].x,a=e[0].y,p=1;p<o;p++){var l=e[p];l.x<n?n=l.x:l.x>i&&(i=l.x),l.y<s?s=l.y:l.y>a&&(a=l.y)}return new r(this.pos.clone().add(new t(n,s)),i-n,a-s).toPolygon()},f.Box=r,r.prototype.toPolygon=r.prototype.toPolygon=function(){var e=this.pos,r=this.w,n=this.h;return new o(new t(e.x,e.y),[new t,new t(r,0),new t(r,n),new t(0,n)])},f.Response=n,n.prototype.clear=n.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var v=[],g=0;g<10;g++)v.push(new t);for(var d=[],g=0;g<5;g++)d.push([]);var P=new n,b=new r(new t,1e-6,1e-6).toPolygon();f.isSeparatingAxis=i;var x=-1,A=0,m=1;return f.pointInCircle=p,f.pointInPolygon=l,f.testCircleCircle=c,f.testPolygonCircle=u,f.testCirclePolygon=h,f.testPolygonPolygon=y,f})},{}],3:[function(t,e,o){function r(t){return[].concat.apply([],t)}const n=t("poly-decomp"),s=t("sat"),i=function(){};i.prototype.enable=function(t,e){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.enable(t[o]);else t instanceof Phaser.Group?this.enable(t.children):(t.hasOwnProperty("body")&&this.enableBody(t.body,e),t.hasOwnProperty("children")&&t.children.length>0&&this.enable(t.children))},i.prototype.enableBody=function(t,e){for(var o=[],r=0;r<e.length;r+=2)o.push(new s.Vector(e[r],e[r+1]));var n=new s.Polygon(new s.Vector(0,0),o);t.sat={polygon:n}},i.prototype.enableSpriteBody=function(t){t.hasOwnProperty("body")||console.error("Enable arcade physics before enabling polygon physics.");var e=t.body,o=new s.Box(new s.Vector(e.x,e.y),e.width,e.height).toPolygon();e.sat={polygon:o}},i.prototype.enableGroup=function(t,e,o){var s=[];e.forEach(function(t){var e=n.quickDecomp(t);e.forEach(function(t){s.push(r(t))})}),s.forEach(function(e){var r=o.game.add.sprite(0,0);o.game.physics.arcade.enable(r),o.game.arcadePolygons.enable(r,e),r.body.immovable=!0,r.body.allowGravity=!1,t.add(r)})},e.exports=i},{"poly-decomp":1,sat:2}],4:[function(t,e,o){const r=t("sat"),n={};n.collideSpriteVsGroup=function(t,e,o,n,s,i){if(!t.body)return!1;t.body.sat||console.error("Non polygon object!"),this.debug={vectors:[],normals:[]},this.features={debug:0};var a=t.body;a.sat.polygon.pos.x=a.x,a.sat.polygon.pos.y=a.y;for(var p in e.children){var l=e.children[p],c=new r.Response,u=r.testPolygonPolygon(a.sat.polygon,l.body.sat.polygon,c);if(u){var h=c.overlapV.clone().scale(-1);a.position.x+=h.x,a.position.y+=h.y,a.sat.polygon.pos.x=a.position.x,a.sat.polygon.pos.y=a.position.y;var y=new r.Vector(a.velocity.x,a.velocity.y),f=c.overlapN.clone().scale(-1),v=y.clone().projectN(f),g=y.clone().sub(v),d=v.clone().scale(-a.sat.bounce),P=g.clone().scale(1-a.sat.friction),b=P.clone().add(d);a.velocity.x=b.x,a.velocity.y=b.y,this.features.debug&&(y.name="velocity",h.name="overlapV",f.name="overlapN",v.name="velocityN",g.name="velocityT",d.name="bounce",P.name="friction",b.name="newVelocity",this.debug.vectors.push(y,f,v,g,d,P,b),this.features.debug>1&&(f.colour="#333",d.colour="#25f",P.colour="#f55",b.colour="#5f5",f.scale(50),this.debug.normals.push(f,d,P,b)))}}},e.exports=n},{sat:2}],5:[function(t,e,o){const r=t("./ArcadePolygons/Facade"),n=t("./ArcadePolygons/Overrides");Phaser.Plugin.ArcadePolygons=function(t,e){Phaser.Plugin.call(this,t,e),this.facade=new Phaser.Plugin.ArcadePolygons.Facade},Phaser.Plugin.ArcadePolygons.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.ArcadePolygons.prototype.constructor=Phaser.Plugin.ArcadePolygons,Phaser.Plugin.ArcadePolygons.VERSION="1",Phaser.Plugin.ArcadePolygons.prototype.init=function(){this.game.arcadePolygons=this.game.arcadePolygons||this.facade,this.originalCollideSpriteVsGroup=Phaser.Physics.Arcade.prototype.collideSpriteVsGroup,Phaser.Physics.Arcade.prototype.collideSpriteVsGroup=Phaser.Plugin.ArcadePolygons.Overrides.collideSpriteVsGroup},Phaser.Plugin.ArcadePolygons.prototype.destroy=function(){this.game.arcadePolygons=null,Phaser.Physics.Arcade.prototype.collideSpriteVsGroup=this.originalCollideSpriteVsGroup,Phaser.Plugin.prototype.destroy.call(this)},Phaser.Plugin.ArcadePolygons.Overrides=n,Phaser.Plugin.ArcadePolygons.Facade=r},{"./ArcadePolygons/Facade":3,"./ArcadePolygons/Overrides":4}]},{},[5]);